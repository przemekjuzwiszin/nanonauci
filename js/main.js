!function(n){var r={};function c(a){if(r[a])return r[a].exports;var t=r[a]={i:a,l:!1,exports:{}};return n[a].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=n,c.c=r,c.d=function(n,r,a){c.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:a})},c.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},c.t=function(n,r){if(1&r&&(n=c(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var t in n)c.d(a,t,function(r){return n[r]}.bind(null,t));return a},c.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return c.d(r,"a",r),r},c.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},c.p="",c(c.s=0)}([function(module,exports,__webpack_require__){"use strict";eval('\r\n\r\n// service worker registration - remove if you\'re not going to use it\r\n\r\nif ("serviceWorker" in navigator) {\r\n  window.addEventListener("load", function () {\r\n    navigator.serviceWorker.register("serviceworker.js").then(\r\n      function (registration) {\r\n        // Registration was successful\r\n        console.log(\r\n          "ServiceWorker registration successful with scope: ",\r\n          registration.scope\r\n        );\r\n      },\r\n      function (err) {\r\n        // registration failed :(\r\n        console.log("ServiceWorker registration failed: ", err);\r\n      }\r\n    );\r\n  });\r\n}\r\n\r\n// place your code below\r\n\r\n//CONSTANT\r\nvar CANVAS_WIDTH = 800;\r\nvar CANVAS_HEIGHT = 600;\r\nvar NANONAUT_WIDTH = 181;\r\nvar NANONAUT_HEIGHT = 229;\r\nvar GROUND_Y = 540;\r\nvar NANONAUT_Y_ACCELERATION = 1;\r\nvar SPACE_KEYCODE = 32;\r\nvar NANONAUT_JUMP_SPEED = 20;\r\nvar NANONAUT_X_SPEED = 5;\r\nvar BACKGROUND_WIDTH = 1000;\r\nvar NANONAUT_NR_ANIMATION_FRAMES = 7;\r\nvar NANONAUT_ANIMATION_SPEED = 3;\r\nvar ROBOT_WIDTH = 141;\r\nvar ROBOT_HEIGHT = 139;\r\nvar ROBOT_NR_ANIMATION_FRAMES = 9;\r\nvar ROBOT_ANIMATION_SPEED = 5;\r\nvar ROBOT_X_SPEED = 4;\r\nvar MIN_DISTANCE_BETWEEN_ROBOTS = 400;\r\nvar MAX_DISTANCE_BETWEEN_ROBOTS = 1200;\r\nvar MAX_ACTIVE_ROBOTS = 3;\r\nvar SCREENSHAKE_RADIUS = 16;\r\nvar NANONAUT_MAX_HEALTH = 100;\r\nvar PLAY_GAME_MODE = 0;\r\nvar GAME_OVER_GAME_MODE = 1;\r\n\r\n//PRECONFIGURATION\r\nvar canvas = document.createElement("canvas");\r\nvar c = canvas.getContext("2d");\r\ncanvas.width = CANVAS_WIDTH;\r\ncanvas.height = CANVAS_HEIGHT;\r\ndocument.body.appendChild(canvas);\r\n\r\nvar nanonautImage = new Image();\r\nnanonautImage.src = "assets/img/animatedNanonaut.png";\r\n\r\nvar backgroundImage = new Image();\r\nbackgroundImage.src = "assets/img/background.png";\r\n\r\nvar bush1Image = new Image();\r\nbush1Image.src = "assets/img/bush1.png";\r\n\r\nvar bush2Image = new Image();\r\nbush2Image.src = "assets/img/bush2.png";\r\n\r\nvar robotImage = new Image();\r\nrobotImage.src = "assets/img/animatedRobot.png";\r\n\r\nvar gameMode = PLAY_GAME_MODE;\r\nvar nanonautX = CANVAS_WIDTH / 2;\r\nvar nanonautY = GROUND_Y - NANONAUT_HEIGHT;\r\nvar nanonautYspeed = 0;\r\nvar nanonautIsInTheAir = false;\r\nvar spaceKeyIsPressed = false;\r\nvar nanonautHealth = NANONAUT_MAX_HEALTH;\r\nvar cameraX = 0;\r\nvar cameraY = 0;\r\nvar screenshake = false;\r\nvar nanonautFrameNr = 0;\r\nvar gameFrameCounter = 0;\r\nvar bushData = generateBushes();\r\nvar nanonautSpriteSheet = {\r\n  nrFramesPerRow: 5,\r\n  spriteWidth: NANONAUT_WIDTH,\r\n  spriteHeight: NANONAUT_HEIGHT,\r\n  image: nanonautImage,\r\n};\r\n\r\n//Code to handle the robot sprite sheet (new object)\r\nvar robotSpriteSheet = {\r\n  nrFramesPerRow: 3,\r\n  spriteWidth: ROBOT_WIDTH,\r\n  spriteHeight: ROBOT_HEIGHT,\r\n  image: robotImage,\r\n};\r\n\r\nvar nanonautCollisionRectangle = {\r\n  xOffset: 60,\r\n  yOffset: 20,\r\n  width: 50,\r\n  height: 200,\r\n};\r\n\r\nvar robotCollisionRectangle = {\r\n  xOffset: 50,\r\n  yOffset: 20,\r\n  width: 50,\r\n  height: 100,\r\n};\r\n\r\n//Short list of robots to test\r\nvar robotData = [];\r\n\r\nwindow.addEventListener("keydown", onKeyDown);\r\nwindow.addEventListener("keyup", onKeyUp);\r\n\r\nwindow.addEventListener("load", start);\r\n\r\nfunction start() {\r\n  window.requestAnimationFrame(mainLoop);\r\n}\r\n\r\nfunction generateBushes() {\r\n  var generatedBushData = [];\r\n  var bushX = 0;\r\n  while (bushX < 2 * CANVAS_WIDTH) {\r\n    var bushImage;\r\n    if (Math.random() >= 0.5) {\r\n      bushImage = bush1Image;\r\n    } else {\r\n      bushImage = bush2Image;\r\n    }\r\n    generatedBushData.push({\r\n      x: bushX,\r\n      y: 80 + Math.random() * 20,\r\n      image: bushImage,\r\n    });\r\n    bushX += 150 + Math.random() * 200;\r\n  }\r\n  return generatedBushData;\r\n}\r\n\r\n//MAIN LOOP\r\nfunction mainLoop() {\r\n  update();\r\n  draw();\r\n  window.requestAnimationFrame(mainLoop);\r\n}\r\n\r\n//CONTROL\r\nfunction onKeyDown(event) {\r\n  if (event.keyCode === SPACE_KEYCODE) {\r\n    spaceKeyIsPressed = true;\r\n  }\r\n}\r\n\r\nfunction onKeyUp(event) {\r\n  if (event.keyCode === SPACE_KEYCODE) {\r\n    spaceKeyIsPressed = false;\r\n  }\r\n}\r\n\r\n//UPDATE\r\nfunction update() {\r\n  if (gameMode != PLAY_GAME_MODE) return;\r\n\r\n  gameFrameCounter = gameFrameCounter + 1;\r\n\r\n  nanonautX = nanonautX + NANONAUT_X_SPEED;\r\n  if (spaceKeyIsPressed && !nanonautIsInTheAir) {\r\n    nanonautYspeed = -NANONAUT_JUMP_SPEED;\r\n    nanonautIsInTheAir = true;\r\n  }\r\n\r\n  //Update nanonaut\r\n  nanonautY = nanonautY + nanonautYspeed;\r\n  nanonautYspeed = nanonautYspeed + NANONAUT_Y_ACCELERATION;\r\n  if (nanonautY > GROUND_Y - NANONAUT_HEIGHT) {\r\n    nanonautY = GROUND_Y - NANONAUT_HEIGHT;\r\n    nanonautYspeed = 0;\r\n    nanonautIsInTheAir = false;\r\n  }\r\n\r\n  //Update animation\r\n  if (gameFrameCounter % NANONAUT_ANIMATION_SPEED === 0) {\r\n    nanonautFrameNr = nanonautFrameNr + 1;\r\n    if (nanonautFrameNr >= NANONAUT_NR_ANIMATION_FRAMES) {\r\n      nanonautFrameNr = 0;\r\n    }\r\n  }\r\n\r\n  //Update camera\r\n  cameraX = nanonautX - 150;\r\n\r\n  //Update bushes\r\n  for (var i = 0; i < bushData.length; i++) {\r\n    if (bushData[i].x - cameraX < -CANVAS_WIDTH) {\r\n      bushData[i].x += 2 * CANVAS_WIDTH + 150;\r\n    }\r\n  }\r\n\r\n  //Update robots\r\n  screenshake = false;\r\n  var nanonautTouchedARobot = updateRobots();\r\n  if (nanonautTouchedARobot) {\r\n    screenshake = true;\r\n    if (nanonautHealth > 0) nanonautHealth -= 1;\r\n  }\r\n  //check if the game end\r\n  if (nanonautHealth <= 0) {\r\n    gameMode = GAME_OVER_GAME_MODE;\r\n    screenshake = false;\r\n  }\r\n}\r\n\r\nfunction updateRobots() {\r\n  //Moving and animating robots and detects a collision with a nanonaut\r\n  var nanonautTouchedARobot = false;\r\n  for (var i = 0; i < robotData.length; i++) {\r\n    if (\r\n      doesNanonautOverlapRobot(\r\n        nanonautX + nanonautCollisionRectangle.xOffset,\r\n        nanonautY + nanonautCollisionRectangle.yOffset,\r\n        nanonautCollisionRectangle.width,\r\n        nanonautCollisionRectangle.height,\r\n        robotData[i].x + robotCollisionRectangle.xOffset,\r\n        robotData[i].y + robotCollisionRectangle.yOffset,\r\n        robotCollisionRectangle.width,\r\n        robotCollisionRectangle.height\r\n      )\r\n    ) {\r\n      nanonautTouchedARobot = true;\r\n    }\r\n    robotData[i].x -= ROBOT_X_SPEED;\r\n    if (gameFrameCounter % ROBOT_ANIMATION_SPEED === 0) {\r\n      robotData[i].frameNr = robotData[i].frameNr + 1;\r\n      if (robotData[i].frameNr >= ROBOT_NR_ANIMATION_FRAMES) {\r\n        robotData[i].frameNr = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  //Remove robots that have gone off-screen\r\n  var robotIndex = 0;\r\n  while (robotIndex < robotData.length) {\r\n    if (robotData[robotIndex].x < cameraX - ROBOT_WIDTH) {\r\n      robotData.splice(robotIndex, 1);\r\n    } else {\r\n      robotIndex += 1;\r\n    }\r\n  }\r\n\r\n  if (robotData.length < MAX_ACTIVE_ROBOTS) {\r\n    var lastRobotX = CANVAS_WIDTH;\r\n    if (robotData.length > 0) {\r\n      lastRobotX = robotData[robotData.length - 1].x;\r\n    }\r\n    var newRobotX =\r\n      lastRobotX +\r\n      MIN_DISTANCE_BETWEEN_ROBOTS +\r\n      Math.random() *\r\n        (MAX_DISTANCE_BETWEEN_ROBOTS - MIN_DISTANCE_BETWEEN_ROBOTS);\r\n    robotData.push({\r\n      x: newRobotX,\r\n      y: GROUND_Y - ROBOT_HEIGHT,\r\n      frameNr: 0,\r\n    });\r\n  }\r\n  return nanonautTouchedARobot;\r\n}\r\n\r\nfunction doesNanonautOverlapRobotAlongOneAxis(\r\n  nanonautNearX,\r\n  nanonautFarX,\r\n  robotNearX,\r\n  robotFarX\r\n) {\r\n  var nanonautOverlapsNearRobotEdge =\r\n    nanonautFarX >= robotNearX && nanonautFarX <= robotFarX;\r\n  var nanonautOverlapsFarRobotEdge =\r\n    nanonautNearX >= robotNearX && nanonautNearX <= robotFarX;\r\n  var nanonautOverlapsEntireRobot =\r\n    nanonautNearX <= robotNearX && nanonautFarX >= robotFarX;\r\n  return (\r\n    nanonautOverlapsNearRobotEdge ||\r\n    nanonautOverlapsFarRobotEdge ||\r\n    nanonautOverlapsEntireRobot\r\n  );\r\n}\r\n\r\nfunction doesNanonautOverlapRobot(\r\n  nanonautX,\r\n  nanonautY,\r\n  NANONAUT_WIDTH,\r\n  NANONAUT_HEIGHT,\r\n  robotX,\r\n  robotY,\r\n  ROBOT_WIDTH,\r\n  ROBOT_HEIGHT\r\n) {\r\n  var nanonautOverlapsRobotOnXAxis = doesNanonautOverlapRobotAlongOneAxis(\r\n    nanonautX,\r\n    nanonautX + NANONAUT_WIDTH,\r\n    robotX,\r\n    robotX + ROBOT_WIDTH\r\n  );\r\n  var nanonautOverlapRobotOnYAxis = doesNanonautOverlapRobotAlongOneAxis(\r\n    nanonautY,\r\n    nanonautY + NANONAUT_HEIGHT,\r\n    robotY,\r\n    robotY + ROBOT_HEIGHT\r\n  );\r\n  return nanonautOverlapsRobotOnXAxis && nanonautOverlapRobotOnYAxis;\r\n}\r\n\r\n//DRAWING\r\nfunction draw() {\r\n  //if necessary, shake the screen\r\n  var shakenCameraX = cameraX;\r\n  var shakenCameraY = cameraY;\r\n  if (screenshake) {\r\n    shakenCameraX += (Math.random() - 0.5) * SCREENSHAKE_RADIUS;\r\n    shakenCameraY += (Math.random() - 0.5) * SCREENSHAKE_RADIUS;\r\n  }\r\n\r\n  //Draw sky\r\n  c.fillStyle = "LightSkyBlue";\r\n  c.fillRect(0, 0, CANVAS_WIDTH, GROUND_Y - 40);\r\n\r\n  //Draw background\r\n  var backgroundX = -(shakenCameraX % BACKGROUND_WIDTH);\r\n  c.drawImage(backgroundImage, backgroundX, -210);\r\n  c.drawImage(backgroundImage, backgroundX + BACKGROUND_WIDTH, -210);\r\n\r\n  //Draw earth\r\n  c.fillStyle = "ForestGreen";\r\n  c.fillRect(0, GROUND_Y - 40, CANVAS_WIDTH, CANVAS_HEIGHT - GROUND_Y + 40);\r\n\r\n  //DRAW BUSHES\r\n  for (var i = 0; i < bushData.length; i++) {\r\n    c.drawImage(\r\n      bushData[i].image,\r\n      bushData[i].x - shakenCameraX,\r\n      GROUND_Y - bushData[i].y - shakenCameraY\r\n    );\r\n  }\r\n\r\n  //Draw robots\r\n  for (var i = 0; i < robotData.length; i++) {\r\n    drawAnimatedSprite(\r\n      robotData[i].x - shakenCameraX,\r\n      robotData[i].y - shakenCameraY,\r\n      robotData[i].frameNr,\r\n      robotSpriteSheet\r\n    );\r\n  }\r\n\r\n  //Draw nanonaut\r\n  drawAnimatedSprite(\r\n    nanonautX - shakenCameraX,\r\n    nanonautY - shakenCameraY,\r\n    nanonautFrameNr,\r\n    nanonautSpriteSheet\r\n  );\r\n\r\n  //display the distance traveled by the nanonaut\r\n  var nanonautDistance = nanonautX / 100;\r\n  c.fillStyle = "black";\r\n  c.font = "48px sans-serif";\r\n  c.fillText(nanonautDistance.toFixed(0) + "m", 20, 40);\r\n\r\n  //Draw nanonaut health\r\n  c.fillStyle = "red";\r\n  c.fillRect(400, 10, (nanonautHealth / NANONAUT_MAX_HEALTH) * 380, 20);\r\n  c.strokeStyle = "red";\r\n  c.strokeRect(400, 10, 380, 20);\r\n\r\n  //If the game is over, display the end of the game\r\n  if (gameMode == GAME_OVER_GAME_MODE) {\r\n    c.font = "69px sans-serif";\r\n    c.fillStyle = "black";\r\n    c.fillText("GAME OVER", 120, 300);\r\n  }\r\n  //Draw a sprite animation\r\n  function drawAnimatedSprite(screenX, screenY, frameNr, spriteSheet) {\r\n    var spriteSheetRow = Math.floor(frameNr / spriteSheet.nrFramesPerRow);\r\n    var spriteSheetColumn = frameNr % spriteSheet.nrFramesPerRow;\r\n    var spriteSheetX = spriteSheetColumn * spriteSheet.spriteWidth;\r\n    var spriteSheetY = spriteSheetRow * spriteSheet.spriteHeight;\r\n\r\n    c.drawImage(\r\n      spriteSheet.image,\r\n      spriteSheetX,\r\n      spriteSheetY,\r\n      spriteSheet.spriteWidth,\r\n      spriteSheet.spriteHeight,\r\n      screenX,\r\n      screenY,\r\n      spriteSheet.spriteWidth,\r\n      spriteSheet.spriteHeight\r\n    );\r\n  }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLHFCQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIscUJBQXFCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vLyBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gLSByZW1vdmUgaWYgeW91J3JlIG5vdCBnb2luZyB0byB1c2UgaXRcclxuXHJcbmlmIChcInNlcnZpY2VXb3JrZXJcIiBpbiBuYXZpZ2F0b3IpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoXCJzZXJ2aWNld29ya2VyLmpzXCIpLnRoZW4oXHJcbiAgICAgIGZ1bmN0aW9uIChyZWdpc3RyYXRpb24pIHtcclxuICAgICAgICAvLyBSZWdpc3RyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcclxuICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgIFwiU2VydmljZVdvcmtlciByZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bCB3aXRoIHNjb3BlOiBcIixcclxuICAgICAgICAgIHJlZ2lzdHJhdGlvbi5zY29wZVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAvLyByZWdpc3RyYXRpb24gZmFpbGVkIDooXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6IFwiLCBlcnIpO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBwbGFjZSB5b3VyIGNvZGUgYmVsb3dcclxuXHJcbi8vQ09OU1RBTlRcclxudmFyIENBTlZBU19XSURUSCA9IDgwMDtcclxudmFyIENBTlZBU19IRUlHSFQgPSA2MDA7XHJcbnZhciBOQU5PTkFVVF9XSURUSCA9IDE4MTtcclxudmFyIE5BTk9OQVVUX0hFSUdIVCA9IDIyOTtcclxudmFyIEdST1VORF9ZID0gNTQwO1xyXG52YXIgTkFOT05BVVRfWV9BQ0NFTEVSQVRJT04gPSAxO1xyXG52YXIgU1BBQ0VfS0VZQ09ERSA9IDMyO1xyXG52YXIgTkFOT05BVVRfSlVNUF9TUEVFRCA9IDIwO1xyXG52YXIgTkFOT05BVVRfWF9TUEVFRCA9IDU7XHJcbnZhciBCQUNLR1JPVU5EX1dJRFRIID0gMTAwMDtcclxudmFyIE5BTk9OQVVUX05SX0FOSU1BVElPTl9GUkFNRVMgPSA3O1xyXG52YXIgTkFOT05BVVRfQU5JTUFUSU9OX1NQRUVEID0gMztcclxudmFyIFJPQk9UX1dJRFRIID0gMTQxO1xyXG52YXIgUk9CT1RfSEVJR0hUID0gMTM5O1xyXG52YXIgUk9CT1RfTlJfQU5JTUFUSU9OX0ZSQU1FUyA9IDk7XHJcbnZhciBST0JPVF9BTklNQVRJT05fU1BFRUQgPSA1O1xyXG52YXIgUk9CT1RfWF9TUEVFRCA9IDQ7XHJcbnZhciBNSU5fRElTVEFOQ0VfQkVUV0VFTl9ST0JPVFMgPSA0MDA7XHJcbnZhciBNQVhfRElTVEFOQ0VfQkVUV0VFTl9ST0JPVFMgPSAxMjAwO1xyXG52YXIgTUFYX0FDVElWRV9ST0JPVFMgPSAzO1xyXG52YXIgU0NSRUVOU0hBS0VfUkFESVVTID0gMTY7XHJcbnZhciBOQU5PTkFVVF9NQVhfSEVBTFRIID0gMTAwO1xyXG52YXIgUExBWV9HQU1FX01PREUgPSAwO1xyXG52YXIgR0FNRV9PVkVSX0dBTUVfTU9ERSA9IDE7XHJcblxyXG4vL1BSRUNPTkZJR1VSQVRJT05cclxudmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbnZhciBjID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuY2FudmFzLndpZHRoID0gQ0FOVkFTX1dJRFRIO1xyXG5jYW52YXMuaGVpZ2h0ID0gQ0FOVkFTX0hFSUdIVDtcclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xyXG5cclxudmFyIG5hbm9uYXV0SW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxubmFub25hdXRJbWFnZS5zcmMgPSBcImFzc2V0cy9pbWcvYW5pbWF0ZWROYW5vbmF1dC5wbmdcIjtcclxuXHJcbnZhciBiYWNrZ3JvdW5kSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuYmFja2dyb3VuZEltYWdlLnNyYyA9IFwiYXNzZXRzL2ltZy9iYWNrZ3JvdW5kLnBuZ1wiO1xyXG5cclxudmFyIGJ1c2gxSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuYnVzaDFJbWFnZS5zcmMgPSBcImFzc2V0cy9pbWcvYnVzaDEucG5nXCI7XHJcblxyXG52YXIgYnVzaDJJbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5idXNoMkltYWdlLnNyYyA9IFwiYXNzZXRzL2ltZy9idXNoMi5wbmdcIjtcclxuXHJcbnZhciByb2JvdEltYWdlID0gbmV3IEltYWdlKCk7XHJcbnJvYm90SW1hZ2Uuc3JjID0gXCJhc3NldHMvaW1nL2FuaW1hdGVkUm9ib3QucG5nXCI7XHJcblxyXG52YXIgZ2FtZU1vZGUgPSBQTEFZX0dBTUVfTU9ERTtcclxudmFyIG5hbm9uYXV0WCA9IENBTlZBU19XSURUSCAvIDI7XHJcbnZhciBuYW5vbmF1dFkgPSBHUk9VTkRfWSAtIE5BTk9OQVVUX0hFSUdIVDtcclxudmFyIG5hbm9uYXV0WXNwZWVkID0gMDtcclxudmFyIG5hbm9uYXV0SXNJblRoZUFpciA9IGZhbHNlO1xyXG52YXIgc3BhY2VLZXlJc1ByZXNzZWQgPSBmYWxzZTtcclxudmFyIG5hbm9uYXV0SGVhbHRoID0gTkFOT05BVVRfTUFYX0hFQUxUSDtcclxudmFyIGNhbWVyYVggPSAwO1xyXG52YXIgY2FtZXJhWSA9IDA7XHJcbnZhciBzY3JlZW5zaGFrZSA9IGZhbHNlO1xyXG52YXIgbmFub25hdXRGcmFtZU5yID0gMDtcclxudmFyIGdhbWVGcmFtZUNvdW50ZXIgPSAwO1xyXG52YXIgYnVzaERhdGEgPSBnZW5lcmF0ZUJ1c2hlcygpO1xyXG52YXIgbmFub25hdXRTcHJpdGVTaGVldCA9IHtcclxuICBuckZyYW1lc1BlclJvdzogNSxcclxuICBzcHJpdGVXaWR0aDogTkFOT05BVVRfV0lEVEgsXHJcbiAgc3ByaXRlSGVpZ2h0OiBOQU5PTkFVVF9IRUlHSFQsXHJcbiAgaW1hZ2U6IG5hbm9uYXV0SW1hZ2UsXHJcbn07XHJcblxyXG4vL0NvZGUgdG8gaGFuZGxlIHRoZSByb2JvdCBzcHJpdGUgc2hlZXQgKG5ldyBvYmplY3QpXHJcbnZhciByb2JvdFNwcml0ZVNoZWV0ID0ge1xyXG4gIG5yRnJhbWVzUGVyUm93OiAzLFxyXG4gIHNwcml0ZVdpZHRoOiBST0JPVF9XSURUSCxcclxuICBzcHJpdGVIZWlnaHQ6IFJPQk9UX0hFSUdIVCxcclxuICBpbWFnZTogcm9ib3RJbWFnZSxcclxufTtcclxuXHJcbnZhciBuYW5vbmF1dENvbGxpc2lvblJlY3RhbmdsZSA9IHtcclxuICB4T2Zmc2V0OiA2MCxcclxuICB5T2Zmc2V0OiAyMCxcclxuICB3aWR0aDogNTAsXHJcbiAgaGVpZ2h0OiAyMDAsXHJcbn07XHJcblxyXG52YXIgcm9ib3RDb2xsaXNpb25SZWN0YW5nbGUgPSB7XHJcbiAgeE9mZnNldDogNTAsXHJcbiAgeU9mZnNldDogMjAsXHJcbiAgd2lkdGg6IDUwLFxyXG4gIGhlaWdodDogMTAwLFxyXG59O1xyXG5cclxuLy9TaG9ydCBsaXN0IG9mIHJvYm90cyB0byB0ZXN0XHJcbnZhciByb2JvdERhdGEgPSBbXTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbktleURvd24pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIG9uS2V5VXApO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHN0YXJ0KTtcclxuXHJcbmZ1bmN0aW9uIHN0YXJ0KCkge1xyXG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobWFpbkxvb3ApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUJ1c2hlcygpIHtcclxuICB2YXIgZ2VuZXJhdGVkQnVzaERhdGEgPSBbXTtcclxuICB2YXIgYnVzaFggPSAwO1xyXG4gIHdoaWxlIChidXNoWCA8IDIgKiBDQU5WQVNfV0lEVEgpIHtcclxuICAgIHZhciBidXNoSW1hZ2U7XHJcbiAgICBpZiAoTWF0aC5yYW5kb20oKSA+PSAwLjUpIHtcclxuICAgICAgYnVzaEltYWdlID0gYnVzaDFJbWFnZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1c2hJbWFnZSA9IGJ1c2gySW1hZ2U7XHJcbiAgICB9XHJcbiAgICBnZW5lcmF0ZWRCdXNoRGF0YS5wdXNoKHtcclxuICAgICAgeDogYnVzaFgsXHJcbiAgICAgIHk6IDgwICsgTWF0aC5yYW5kb20oKSAqIDIwLFxyXG4gICAgICBpbWFnZTogYnVzaEltYWdlLFxyXG4gICAgfSk7XHJcbiAgICBidXNoWCArPSAxNTAgKyBNYXRoLnJhbmRvbSgpICogMjAwO1xyXG4gIH1cclxuICByZXR1cm4gZ2VuZXJhdGVkQnVzaERhdGE7XHJcbn1cclxuXHJcbi8vTUFJTiBMT09QXHJcbmZ1bmN0aW9uIG1haW5Mb29wKCkge1xyXG4gIHVwZGF0ZSgpO1xyXG4gIGRyYXcoKTtcclxuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKG1haW5Mb29wKTtcclxufVxyXG5cclxuLy9DT05UUk9MXHJcbmZ1bmN0aW9uIG9uS2V5RG93bihldmVudCkge1xyXG4gIGlmIChldmVudC5rZXlDb2RlID09PSBTUEFDRV9LRVlDT0RFKSB7XHJcbiAgICBzcGFjZUtleUlzUHJlc3NlZCA9IHRydWU7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvbktleVVwKGV2ZW50KSB7XHJcbiAgaWYgKGV2ZW50LmtleUNvZGUgPT09IFNQQUNFX0tFWUNPREUpIHtcclxuICAgIHNwYWNlS2V5SXNQcmVzc2VkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vL1VQREFURVxyXG5mdW5jdGlvbiB1cGRhdGUoKSB7XHJcbiAgaWYgKGdhbWVNb2RlICE9IFBMQVlfR0FNRV9NT0RFKSByZXR1cm47XHJcblxyXG4gIGdhbWVGcmFtZUNvdW50ZXIgPSBnYW1lRnJhbWVDb3VudGVyICsgMTtcclxuXHJcbiAgbmFub25hdXRYID0gbmFub25hdXRYICsgTkFOT05BVVRfWF9TUEVFRDtcclxuICBpZiAoc3BhY2VLZXlJc1ByZXNzZWQgJiYgIW5hbm9uYXV0SXNJblRoZUFpcikge1xyXG4gICAgbmFub25hdXRZc3BlZWQgPSAtTkFOT05BVVRfSlVNUF9TUEVFRDtcclxuICAgIG5hbm9uYXV0SXNJblRoZUFpciA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvL1VwZGF0ZSBuYW5vbmF1dFxyXG4gIG5hbm9uYXV0WSA9IG5hbm9uYXV0WSArIG5hbm9uYXV0WXNwZWVkO1xyXG4gIG5hbm9uYXV0WXNwZWVkID0gbmFub25hdXRZc3BlZWQgKyBOQU5PTkFVVF9ZX0FDQ0VMRVJBVElPTjtcclxuICBpZiAobmFub25hdXRZID4gR1JPVU5EX1kgLSBOQU5PTkFVVF9IRUlHSFQpIHtcclxuICAgIG5hbm9uYXV0WSA9IEdST1VORF9ZIC0gTkFOT05BVVRfSEVJR0hUO1xyXG4gICAgbmFub25hdXRZc3BlZWQgPSAwO1xyXG4gICAgbmFub25hdXRJc0luVGhlQWlyID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvL1VwZGF0ZSBhbmltYXRpb25cclxuICBpZiAoZ2FtZUZyYW1lQ291bnRlciAlIE5BTk9OQVVUX0FOSU1BVElPTl9TUEVFRCA9PT0gMCkge1xyXG4gICAgbmFub25hdXRGcmFtZU5yID0gbmFub25hdXRGcmFtZU5yICsgMTtcclxuICAgIGlmIChuYW5vbmF1dEZyYW1lTnIgPj0gTkFOT05BVVRfTlJfQU5JTUFUSU9OX0ZSQU1FUykge1xyXG4gICAgICBuYW5vbmF1dEZyYW1lTnIgPSAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9VcGRhdGUgY2FtZXJhXHJcbiAgY2FtZXJhWCA9IG5hbm9uYXV0WCAtIDE1MDtcclxuXHJcbiAgLy9VcGRhdGUgYnVzaGVzXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidXNoRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYgKGJ1c2hEYXRhW2ldLnggLSBjYW1lcmFYIDwgLUNBTlZBU19XSURUSCkge1xyXG4gICAgICBidXNoRGF0YVtpXS54ICs9IDIgKiBDQU5WQVNfV0lEVEggKyAxNTA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL1VwZGF0ZSByb2JvdHNcclxuICBzY3JlZW5zaGFrZSA9IGZhbHNlO1xyXG4gIHZhciBuYW5vbmF1dFRvdWNoZWRBUm9ib3QgPSB1cGRhdGVSb2JvdHMoKTtcclxuICBpZiAobmFub25hdXRUb3VjaGVkQVJvYm90KSB7XHJcbiAgICBzY3JlZW5zaGFrZSA9IHRydWU7XHJcbiAgICBpZiAobmFub25hdXRIZWFsdGggPiAwKSBuYW5vbmF1dEhlYWx0aCAtPSAxO1xyXG4gIH1cclxuICAvL2NoZWNrIGlmIHRoZSBnYW1lIGVuZFxyXG4gIGlmIChuYW5vbmF1dEhlYWx0aCA8PSAwKSB7XHJcbiAgICBnYW1lTW9kZSA9IEdBTUVfT1ZFUl9HQU1FX01PREU7XHJcbiAgICBzY3JlZW5zaGFrZSA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUm9ib3RzKCkge1xyXG4gIC8vTW92aW5nIGFuZCBhbmltYXRpbmcgcm9ib3RzIGFuZCBkZXRlY3RzIGEgY29sbGlzaW9uIHdpdGggYSBuYW5vbmF1dFxyXG4gIHZhciBuYW5vbmF1dFRvdWNoZWRBUm9ib3QgPSBmYWxzZTtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJvYm90RGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYgKFxyXG4gICAgICBkb2VzTmFub25hdXRPdmVybGFwUm9ib3QoXHJcbiAgICAgICAgbmFub25hdXRYICsgbmFub25hdXRDb2xsaXNpb25SZWN0YW5nbGUueE9mZnNldCxcclxuICAgICAgICBuYW5vbmF1dFkgKyBuYW5vbmF1dENvbGxpc2lvblJlY3RhbmdsZS55T2Zmc2V0LFxyXG4gICAgICAgIG5hbm9uYXV0Q29sbGlzaW9uUmVjdGFuZ2xlLndpZHRoLFxyXG4gICAgICAgIG5hbm9uYXV0Q29sbGlzaW9uUmVjdGFuZ2xlLmhlaWdodCxcclxuICAgICAgICByb2JvdERhdGFbaV0ueCArIHJvYm90Q29sbGlzaW9uUmVjdGFuZ2xlLnhPZmZzZXQsXHJcbiAgICAgICAgcm9ib3REYXRhW2ldLnkgKyByb2JvdENvbGxpc2lvblJlY3RhbmdsZS55T2Zmc2V0LFxyXG4gICAgICAgIHJvYm90Q29sbGlzaW9uUmVjdGFuZ2xlLndpZHRoLFxyXG4gICAgICAgIHJvYm90Q29sbGlzaW9uUmVjdGFuZ2xlLmhlaWdodFxyXG4gICAgICApXHJcbiAgICApIHtcclxuICAgICAgbmFub25hdXRUb3VjaGVkQVJvYm90ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJvYm90RGF0YVtpXS54IC09IFJPQk9UX1hfU1BFRUQ7XHJcbiAgICBpZiAoZ2FtZUZyYW1lQ291bnRlciAlIFJPQk9UX0FOSU1BVElPTl9TUEVFRCA9PT0gMCkge1xyXG4gICAgICByb2JvdERhdGFbaV0uZnJhbWVOciA9IHJvYm90RGF0YVtpXS5mcmFtZU5yICsgMTtcclxuICAgICAgaWYgKHJvYm90RGF0YVtpXS5mcmFtZU5yID49IFJPQk9UX05SX0FOSU1BVElPTl9GUkFNRVMpIHtcclxuICAgICAgICByb2JvdERhdGFbaV0uZnJhbWVOciA9IDA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vUmVtb3ZlIHJvYm90cyB0aGF0IGhhdmUgZ29uZSBvZmYtc2NyZWVuXHJcbiAgdmFyIHJvYm90SW5kZXggPSAwO1xyXG4gIHdoaWxlIChyb2JvdEluZGV4IDwgcm9ib3REYXRhLmxlbmd0aCkge1xyXG4gICAgaWYgKHJvYm90RGF0YVtyb2JvdEluZGV4XS54IDwgY2FtZXJhWCAtIFJPQk9UX1dJRFRIKSB7XHJcbiAgICAgIHJvYm90RGF0YS5zcGxpY2Uocm9ib3RJbmRleCwgMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByb2JvdEluZGV4ICs9IDE7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAocm9ib3REYXRhLmxlbmd0aCA8IE1BWF9BQ1RJVkVfUk9CT1RTKSB7XHJcbiAgICB2YXIgbGFzdFJvYm90WCA9IENBTlZBU19XSURUSDtcclxuICAgIGlmIChyb2JvdERhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICBsYXN0Um9ib3RYID0gcm9ib3REYXRhW3JvYm90RGF0YS5sZW5ndGggLSAxXS54O1xyXG4gICAgfVxyXG4gICAgdmFyIG5ld1JvYm90WCA9XHJcbiAgICAgIGxhc3RSb2JvdFggK1xyXG4gICAgICBNSU5fRElTVEFOQ0VfQkVUV0VFTl9ST0JPVFMgK1xyXG4gICAgICBNYXRoLnJhbmRvbSgpICpcclxuICAgICAgICAoTUFYX0RJU1RBTkNFX0JFVFdFRU5fUk9CT1RTIC0gTUlOX0RJU1RBTkNFX0JFVFdFRU5fUk9CT1RTKTtcclxuICAgIHJvYm90RGF0YS5wdXNoKHtcclxuICAgICAgeDogbmV3Um9ib3RYLFxyXG4gICAgICB5OiBHUk9VTkRfWSAtIFJPQk9UX0hFSUdIVCxcclxuICAgICAgZnJhbWVOcjogMCxcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gbmFub25hdXRUb3VjaGVkQVJvYm90O1xyXG59XHJcblxyXG5mdW5jdGlvbiBkb2VzTmFub25hdXRPdmVybGFwUm9ib3RBbG9uZ09uZUF4aXMoXHJcbiAgbmFub25hdXROZWFyWCxcclxuICBuYW5vbmF1dEZhclgsXHJcbiAgcm9ib3ROZWFyWCxcclxuICByb2JvdEZhclhcclxuKSB7XHJcbiAgdmFyIG5hbm9uYXV0T3ZlcmxhcHNOZWFyUm9ib3RFZGdlID1cclxuICAgIG5hbm9uYXV0RmFyWCA+PSByb2JvdE5lYXJYICYmIG5hbm9uYXV0RmFyWCA8PSByb2JvdEZhclg7XHJcbiAgdmFyIG5hbm9uYXV0T3ZlcmxhcHNGYXJSb2JvdEVkZ2UgPVxyXG4gICAgbmFub25hdXROZWFyWCA+PSByb2JvdE5lYXJYICYmIG5hbm9uYXV0TmVhclggPD0gcm9ib3RGYXJYO1xyXG4gIHZhciBuYW5vbmF1dE92ZXJsYXBzRW50aXJlUm9ib3QgPVxyXG4gICAgbmFub25hdXROZWFyWCA8PSByb2JvdE5lYXJYICYmIG5hbm9uYXV0RmFyWCA+PSByb2JvdEZhclg7XHJcbiAgcmV0dXJuIChcclxuICAgIG5hbm9uYXV0T3ZlcmxhcHNOZWFyUm9ib3RFZGdlIHx8XHJcbiAgICBuYW5vbmF1dE92ZXJsYXBzRmFyUm9ib3RFZGdlIHx8XHJcbiAgICBuYW5vbmF1dE92ZXJsYXBzRW50aXJlUm9ib3RcclxuICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkb2VzTmFub25hdXRPdmVybGFwUm9ib3QoXHJcbiAgbmFub25hdXRYLFxyXG4gIG5hbm9uYXV0WSxcclxuICBOQU5PTkFVVF9XSURUSCxcclxuICBOQU5PTkFVVF9IRUlHSFQsXHJcbiAgcm9ib3RYLFxyXG4gIHJvYm90WSxcclxuICBST0JPVF9XSURUSCxcclxuICBST0JPVF9IRUlHSFRcclxuKSB7XHJcbiAgdmFyIG5hbm9uYXV0T3ZlcmxhcHNSb2JvdE9uWEF4aXMgPSBkb2VzTmFub25hdXRPdmVybGFwUm9ib3RBbG9uZ09uZUF4aXMoXHJcbiAgICBuYW5vbmF1dFgsXHJcbiAgICBuYW5vbmF1dFggKyBOQU5PTkFVVF9XSURUSCxcclxuICAgIHJvYm90WCxcclxuICAgIHJvYm90WCArIFJPQk9UX1dJRFRIXHJcbiAgKTtcclxuICB2YXIgbmFub25hdXRPdmVybGFwUm9ib3RPbllBeGlzID0gZG9lc05hbm9uYXV0T3ZlcmxhcFJvYm90QWxvbmdPbmVBeGlzKFxyXG4gICAgbmFub25hdXRZLFxyXG4gICAgbmFub25hdXRZICsgTkFOT05BVVRfSEVJR0hULFxyXG4gICAgcm9ib3RZLFxyXG4gICAgcm9ib3RZICsgUk9CT1RfSEVJR0hUXHJcbiAgKTtcclxuICByZXR1cm4gbmFub25hdXRPdmVybGFwc1JvYm90T25YQXhpcyAmJiBuYW5vbmF1dE92ZXJsYXBSb2JvdE9uWUF4aXM7XHJcbn1cclxuXHJcbi8vRFJBV0lOR1xyXG5mdW5jdGlvbiBkcmF3KCkge1xyXG4gIC8vaWYgbmVjZXNzYXJ5LCBzaGFrZSB0aGUgc2NyZWVuXHJcbiAgdmFyIHNoYWtlbkNhbWVyYVggPSBjYW1lcmFYO1xyXG4gIHZhciBzaGFrZW5DYW1lcmFZID0gY2FtZXJhWTtcclxuICBpZiAoc2NyZWVuc2hha2UpIHtcclxuICAgIHNoYWtlbkNhbWVyYVggKz0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogU0NSRUVOU0hBS0VfUkFESVVTO1xyXG4gICAgc2hha2VuQ2FtZXJhWSArPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBTQ1JFRU5TSEFLRV9SQURJVVM7XHJcbiAgfVxyXG5cclxuICAvL0RyYXcgc2t5XHJcbiAgYy5maWxsU3R5bGUgPSBcIkxpZ2h0U2t5Qmx1ZVwiO1xyXG4gIGMuZmlsbFJlY3QoMCwgMCwgQ0FOVkFTX1dJRFRILCBHUk9VTkRfWSAtIDQwKTtcclxuXHJcbiAgLy9EcmF3IGJhY2tncm91bmRcclxuICB2YXIgYmFja2dyb3VuZFggPSAtKHNoYWtlbkNhbWVyYVggJSBCQUNLR1JPVU5EX1dJRFRIKTtcclxuICBjLmRyYXdJbWFnZShiYWNrZ3JvdW5kSW1hZ2UsIGJhY2tncm91bmRYLCAtMjEwKTtcclxuICBjLmRyYXdJbWFnZShiYWNrZ3JvdW5kSW1hZ2UsIGJhY2tncm91bmRYICsgQkFDS0dST1VORF9XSURUSCwgLTIxMCk7XHJcblxyXG4gIC8vRHJhdyBlYXJ0aFxyXG4gIGMuZmlsbFN0eWxlID0gXCJGb3Jlc3RHcmVlblwiO1xyXG4gIGMuZmlsbFJlY3QoMCwgR1JPVU5EX1kgLSA0MCwgQ0FOVkFTX1dJRFRILCBDQU5WQVNfSEVJR0hUIC0gR1JPVU5EX1kgKyA0MCk7XHJcblxyXG4gIC8vRFJBVyBCVVNIRVNcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1c2hEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjLmRyYXdJbWFnZShcclxuICAgICAgYnVzaERhdGFbaV0uaW1hZ2UsXHJcbiAgICAgIGJ1c2hEYXRhW2ldLnggLSBzaGFrZW5DYW1lcmFYLFxyXG4gICAgICBHUk9VTkRfWSAtIGJ1c2hEYXRhW2ldLnkgLSBzaGFrZW5DYW1lcmFZXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy9EcmF3IHJvYm90c1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcm9ib3REYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBkcmF3QW5pbWF0ZWRTcHJpdGUoXHJcbiAgICAgIHJvYm90RGF0YVtpXS54IC0gc2hha2VuQ2FtZXJhWCxcclxuICAgICAgcm9ib3REYXRhW2ldLnkgLSBzaGFrZW5DYW1lcmFZLFxyXG4gICAgICByb2JvdERhdGFbaV0uZnJhbWVOcixcclxuICAgICAgcm9ib3RTcHJpdGVTaGVldFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vRHJhdyBuYW5vbmF1dFxyXG4gIGRyYXdBbmltYXRlZFNwcml0ZShcclxuICAgIG5hbm9uYXV0WCAtIHNoYWtlbkNhbWVyYVgsXHJcbiAgICBuYW5vbmF1dFkgLSBzaGFrZW5DYW1lcmFZLFxyXG4gICAgbmFub25hdXRGcmFtZU5yLFxyXG4gICAgbmFub25hdXRTcHJpdGVTaGVldFxyXG4gICk7XHJcblxyXG4gIC8vZGlzcGxheSB0aGUgZGlzdGFuY2UgdHJhdmVsZWQgYnkgdGhlIG5hbm9uYXV0XHJcbiAgdmFyIG5hbm9uYXV0RGlzdGFuY2UgPSBuYW5vbmF1dFggLyAxMDA7XHJcbiAgYy5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgYy5mb250ID0gXCI0OHB4IHNhbnMtc2VyaWZcIjtcclxuICBjLmZpbGxUZXh0KG5hbm9uYXV0RGlzdGFuY2UudG9GaXhlZCgwKSArIFwibVwiLCAyMCwgNDApO1xyXG5cclxuICAvL0RyYXcgbmFub25hdXQgaGVhbHRoXHJcbiAgYy5maWxsU3R5bGUgPSBcInJlZFwiO1xyXG4gIGMuZmlsbFJlY3QoNDAwLCAxMCwgKG5hbm9uYXV0SGVhbHRoIC8gTkFOT05BVVRfTUFYX0hFQUxUSCkgKiAzODAsIDIwKTtcclxuICBjLnN0cm9rZVN0eWxlID0gXCJyZWRcIjtcclxuICBjLnN0cm9rZVJlY3QoNDAwLCAxMCwgMzgwLCAyMCk7XHJcblxyXG4gIC8vSWYgdGhlIGdhbWUgaXMgb3ZlciwgZGlzcGxheSB0aGUgZW5kIG9mIHRoZSBnYW1lXHJcbiAgaWYgKGdhbWVNb2RlID09IEdBTUVfT1ZFUl9HQU1FX01PREUpIHtcclxuICAgIGMuZm9udCA9IFwiNjlweCBzYW5zLXNlcmlmXCI7XHJcbiAgICBjLmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgIGMuZmlsbFRleHQoXCJHQU1FIE9WRVJcIiwgMTIwLCAzMDApO1xyXG4gIH1cclxuICAvL0RyYXcgYSBzcHJpdGUgYW5pbWF0aW9uXHJcbiAgZnVuY3Rpb24gZHJhd0FuaW1hdGVkU3ByaXRlKHNjcmVlblgsIHNjcmVlblksIGZyYW1lTnIsIHNwcml0ZVNoZWV0KSB7XHJcbiAgICB2YXIgc3ByaXRlU2hlZXRSb3cgPSBNYXRoLmZsb29yKGZyYW1lTnIgLyBzcHJpdGVTaGVldC5uckZyYW1lc1BlclJvdyk7XHJcbiAgICB2YXIgc3ByaXRlU2hlZXRDb2x1bW4gPSBmcmFtZU5yICUgc3ByaXRlU2hlZXQubnJGcmFtZXNQZXJSb3c7XHJcbiAgICB2YXIgc3ByaXRlU2hlZXRYID0gc3ByaXRlU2hlZXRDb2x1bW4gKiBzcHJpdGVTaGVldC5zcHJpdGVXaWR0aDtcclxuICAgIHZhciBzcHJpdGVTaGVldFkgPSBzcHJpdGVTaGVldFJvdyAqIHNwcml0ZVNoZWV0LnNwcml0ZUhlaWdodDtcclxuXHJcbiAgICBjLmRyYXdJbWFnZShcclxuICAgICAgc3ByaXRlU2hlZXQuaW1hZ2UsXHJcbiAgICAgIHNwcml0ZVNoZWV0WCxcclxuICAgICAgc3ByaXRlU2hlZXRZLFxyXG4gICAgICBzcHJpdGVTaGVldC5zcHJpdGVXaWR0aCxcclxuICAgICAgc3ByaXRlU2hlZXQuc3ByaXRlSGVpZ2h0LFxyXG4gICAgICBzY3JlZW5YLFxyXG4gICAgICBzY3JlZW5ZLFxyXG4gICAgICBzcHJpdGVTaGVldC5zcHJpdGVXaWR0aCxcclxuICAgICAgc3ByaXRlU2hlZXQuc3ByaXRlSGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')}]);